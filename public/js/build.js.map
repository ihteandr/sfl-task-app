{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","frontend/js/classes/Component.js","frontend/js/classes/HttpProvider.js","frontend/js/classes/Subject.js","frontend/js/components/cities-panel.js","frontend/js/components/day-panel.js","frontend/js/components/weather-panel.js","frontend/js/index.js"],"names":[],"mappings":"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","file":"build.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","\r\n\r\n/*\r\n* SFLComponent\r\n*\r\n* Constructor take options\r\n* options.event\r\n*     {\r\n*       'event selector': 'eventHandler'\r\n*     }\r\n* options.container\r\n     DOMNode or selector\r\n*\r\n* */\r\nexport default class SFLComponent{\r\n    constructor(options){\r\n        this.events = options.events;\r\n        this.container = typeof options.container === 'string' ? document.querySelector(options.container) : options.container;\r\n        this.prepareEventsListeners();\r\n    }\r\n    prepareEventsListeners(){\r\n        for(let key in this.events){\r\n            if(this.events.hasOwnProperty(key)){\r\n                this[this.events[key]] = this[this.events[key]].bind(this);\r\n            }\r\n        }\r\n    }\r\n    attachEvents(){\r\n        for(let key in this.events){\r\n            if(this.events.hasOwnProperty(key)){\r\n                let keyParts = key.split(' ')\r\n                let event = keyParts[0];\r\n                let selector = keyParts.slice(1).join(' ');\r\n                let elements = this.container.querySelectorAll(selector);\r\n                for(let i = 0; i < elements.length; i++){\r\n                    elements[i].addEventListener(event, this[this.events[key]]);    \r\n                }\r\n            }\r\n        }\r\n    }\r\n    dettachEvents(){\r\n        for(let key in this.events){\r\n            if(this.events.hasOwnProperty(key)){\r\n                let keyParts = key.split(' ');\r\n                let event = keyParts[0];\r\n                let selector = keyParts.slice(1).join(' ');\r\n                let elements = this.container.querySelectorAll(selector);\r\n                for(let i = 0; i < elements.length; i++){\r\n                    elements[i].removeEventListener(event, this[this.events[key]]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","\r\nexport default class HttpProvider{\r\n    doGet(path, options){\r\n        return new Promise((resolve, reject)=>{\r\n            var xhr = new XMLHttpRequest();\r\n            let query = '';\r\n            for(var i in options){\r\n                query += i + '=' + options[i] + '&';\r\n            }\r\n            xhr.open('GET', path + '?' + query, true);\r\n\r\n            xhr.send();\r\n\r\n            xhr.onreadystatechange = function() {\r\n                if (xhr.readyState != 4) return;\r\n                if (xhr.status === 200) {\r\n                    resolve(JSON.parse(xhr.responseText));\r\n                } else {\r\n                    reject(xhr.responseText);\r\n                }\r\n\r\n            }\r\n        })\r\n    }\r\n}","export default class Subject{\r\n    constructor(){\r\n        this.subcribers = [];\r\n    }\r\n    subscribe(func){\r\n        this.subcribers.push(func);\r\n        return {\r\n            unsubscribe: ()=>{\r\n                this.subcribers.splice(this.subcribers.indexOf(func), 1);\r\n            }\r\n        }\r\n    }\r\n    next(data){\r\n        this.subcribers.forEach((subscriber)=>{\r\n            subscriber(data);\r\n        });\r\n    }\r\n}\r\n\r\n","import SFLComponent from '../classes/Component';\r\nimport Subject from '../classes/Subject';\r\n\r\nexport default class CitiesPanelComponent extends SFLComponent{\r\n    constructor(options){\r\n        let events = {\r\n            'change .cities': 'selectCity'\r\n        };\r\n        super(Object.assign(options, {\r\n            events: events\r\n        }));\r\n        this.cityChangeStream = new Subject();\r\n        this.selectedCity = null;\r\n        this.citiesData = ['Moscow', 'Yerevan', 'London', 'Kiev', 'Amsterdam'];\r\n\r\n    }\r\n    selectSelectCurrentCity(){\r\n        if (navigator.geolocation) {\r\n            navigator.geolocation.getCurrentPosition((position)=>{\r\n                let geocoder = new google.maps.Geocoder();\r\n                let lat = position.coords.latitude;\r\n                let lng = position.coords.longitude;\r\n                let latlng = new google.maps.LatLng(lat, lng);\r\n                geocoder.geocode({'latLng': latlng}, (results, status)=> {\r\n                    if (status == google.maps.GeocoderStatus.OK) {\r\n                        let city;\r\n                        if (results[1]) {\r\n                            //formatted address\r\n                            //find country name\r\n                            for (var i=0; i<results[0].address_components.length; i++) {\r\n                                for (var b=0;b<results[0].address_components[i].types.length;b++) {\r\n\r\n                                    //there are different types that might hold a city admin_area_lvl_1 usually does in come cases looking for sublocality type will be more appropriate\r\n                                    if (results[0].address_components[i].types[b] == \"administrative_area_level_1\") {\r\n                                        //this is the object you are looking for\r\n                                        city= results[0].address_components[i];\r\n                                        break;\r\n                                    }\r\n                                }\r\n                            }\r\n                            this.selectedCity = city.short_name;\r\n                            this.cityChangeStream.next(this.selectedCity);\r\n                            this.container.querySelector('select').value = this.selectedCity;\r\n                        } else {\r\n                            console.log(\"No results found\");\r\n                        }\r\n                    } else {\r\n                        onsole.log(\"Geocoder failed due to: \" + status);\r\n                    }\r\n                });\r\n            }, (err)=>{\r\n                console.error(err);\r\n            });\r\n        }\r\n    }\r\n    selectCity(event){\r\n        this.selectedCity = event.target.value;\r\n        this.cityChangeStream.next(this.selectedCity);\r\n    }\r\n    render(){\r\n        this.dettachEvents();\r\n        this.container.innerHTML = '';\r\n        let selectEl = document.createElement('select');\r\n        selectEl.classList.add('cities');\r\n        this.citiesData.forEach((city)=>{\r\n            let optionEl = document.createElement('option');\r\n            optionEl.setAttribute('value', city);\r\n            optionEl.innerText = city;\r\n            selectEl.appendChild(optionEl);\r\n        });\r\n        this.container.appendChild(selectEl);\r\n        this.attachEvents();\r\n    }\r\n}","import SFLComponent from '../classes/Component';\r\nimport Subject from '../classes/Subject';\r\n\r\nexport default class DayPanelComponent extends SFLComponent{\r\n    constructor(options){\r\n        let events = {\r\n            'click .date': 'selectDate'\r\n        };\r\n        super(Object.assign(options, {\r\n            events: events\r\n        }));\r\n        this.dayChangeStream = new Subject();\r\n        this.selectedDay = null;\r\n\r\n    }\r\n    getToday(){\r\n        let today = new Date();\r\n        today.setHours(0);\r\n        today.setMinutes(0);\r\n        today.setMinutes(0);\r\n        today.setMilliseconds(0);\r\n        return today;\r\n    }\r\n    selectToday(){\r\n        let today = this.getToday();\r\n        this.unselectAll();\r\n        this.selectedDay = today.getTime();\r\n        this.container.querySelector('.date[date=\"' + today.getTime() + '\"]').classList.add('date_selected');\r\n        this.dayChangeStream.next(this.selectedDay);\r\n    }\r\n    unselectAll(){\r\n        let dayElements = this.container.querySelectorAll('.date');\r\n        for(let i = 0; i < dayElements.length; i++){\r\n            dayElements[i].classList.remove('date_selected');\r\n        }\r\n    }\r\n    selectDate(event){\r\n        this.unselectAll();\r\n        event.currentTarget.classList.add('date_selected');\r\n        this.selectedDay = parseInt(event.currentTarget.getAttribute('date'));\r\n        this.dayChangeStream.next(this.selectedDay);\r\n    }\r\n    getUpcomingDates(){\r\n        let today = this.getToday();\r\n        let upcomingDates = [];\r\n        for(var i = 0; i < 7; i++){\r\n            let date = new Date(today.getTime() + i*24*60*60*1000);\r\n            upcomingDates.push({\r\n                day: date.getDate(),\r\n                weekDay: [\r\n                    'Sunday',\r\n                    'Monday',\r\n                    'Tuesday',\r\n                    'Wednesday',\r\n                    'Thursday',\r\n                    'Friday',\r\n                    'Saturday'\r\n                ][date.getDay()],\r\n                time: date.getTime(),\r\n                month: [\r\n                    \"January\",\r\n                    \"February\",\r\n                    \"March\",\r\n                    \"April\",\r\n                    \"May\",\r\n                    \"June\",\r\n                    \"July\",\r\n                    \"August\",\r\n                    \"September\",\r\n                    \"October\",\r\n                    \"November\",\r\n                    \"December\"\r\n                ][date.getMonth()]\r\n            })\r\n        }\r\n        return upcomingDates;\r\n    }\r\n    render(){\r\n        this.dettachEvents();\r\n        this.container.innerHTML = '';\r\n        let dates = this.getUpcomingDates();\r\n        dates.forEach((date)=>{\r\n            let dateEl = document.createElement('div'),\r\n                dayLabel = document.createElement('label'),\r\n                monthLabel = document.createElement('label'),\r\n                weekDayLabel = document.createElement('label');\r\n            dateEl.classList.add('date');\r\n            dayLabel.classList.add('date_day');\r\n            monthLabel.classList.add('date_month');\r\n            weekDayLabel.classList.add('date_week');\r\n            dayLabel.innerText = date.day;\r\n            monthLabel.innerText = date.month;\r\n            weekDayLabel.innerText = date.weekDay;\r\n            dateEl.setAttribute('date', date.time);\r\n            dateEl.appendChild(dayLabel);\r\n            dateEl.appendChild(monthLabel);\r\n            dateEl.appendChild(weekDayLabel);\r\n            this.container.appendChild(dateEl);\r\n        });\r\n        this.attachEvents();\r\n    }\r\n}","import SFLComponent from '../classes/Component';\r\nimport Subject from '../classes/Subject';\r\nimport HttpProvider from '../classes/HttpProvider';\r\nexport default class WeatherPanelComponent extends SFLComponent{\r\n    constructor(options){\r\n        super(Object.assign(options, {}));\r\n        this.http = new HttpProvider();\r\n        this.dayChangeStream = new Subject();\r\n        this.selectedOptions = {\r\n            city: null,\r\n            date: null\r\n        };\r\n        this.fetchedData = null;\r\n        this.checkIfCanFetchWeatherData = this.checkIfCanFetchWeatherData.bind(this);\r\n    }\r\n    checkIfNeedUpdateDisplay(){\r\n        if(this.selectedOptions.date){\r\n            this.render();\r\n        }\r\n    }\r\n    checkIfCanFetchWeatherData(){\r\n        if(this.selectedOptions.city){\r\n            this.fetchWeatherData();\r\n        }\r\n    }\r\n    fetchWeatherData(){\r\n        this.http.doGet('https://cors-anywhere.herokuapp.com/http://api.openweathermap.org/data/2.5/forecast', {\r\n            appid: 'a9bcf4f4899aaab6b7194e3f674f162b',\r\n            q: this.selectedOptions.city,\r\n            units: 'metric'\r\n        }).then((data)=>{\r\n            this.fetchedData = data;\r\n            this.checkIfNeedUpdateDisplay();\r\n        }, (err)=>{\r\n            console.error(err);\r\n        })\r\n    }\r\n    render(){\r\n        this.dettachEvents();\r\n        this.container.innerHTML = '';\r\n        let display = document.createElement('h1');\r\n        if(this.fetchedData && this.selectedOptions.date){\r\n            //find weather data for selected date\r\n            let data = this.fetchedData.list.filter((data)=>{\r\n                let time = this.selectedOptions.date.getTime();\r\n                return data.dt*1000 > time && time < data.dt*1000 + 23.9*60*60*1000;\r\n            });\r\n            let sum = 0;\r\n\r\n            data.forEach((singleData)=>{\r\n                sum+=singleData.main.temp;\r\n            });\r\n            if(data.length > 0){\r\n                display.innerText = (sum/data.length).toFixed(1) + 'C';\r\n            } else {\r\n                display.innerText = 'Unknown';\r\n            }\r\n        }\r\n\r\n        this.container.appendChild(display);\r\n        this.attachEvents();\r\n    }\r\n}","import DayPanelComponent from './components/day-panel';\r\nimport CitiesPanelComponent from './components/cities-panel';\r\nimport WeatherPanelComponent from './components/weather-panel';\r\nwindow.addEventListener('load', ()=>{\r\n    console.log('ok');\r\n    let dayPanel = new DayPanelComponent({\r\n        container: '.dates-panel'\r\n    });\r\n    let citiesPanel = new CitiesPanelComponent({\r\n        container: '.cities-panel'\r\n    });\r\n    let weatherPanel = new WeatherPanelComponent({\r\n        container: '.weather-panel'\r\n    });\r\n    dayPanel.dayChangeStream.subscribe((time)=>{\r\n        weatherPanel.selectedOptions.date = new Date(time);\r\n        weatherPanel.checkIfNeedUpdateDisplay();\r\n    });\r\n    citiesPanel.cityChangeStream.subscribe((city)=>{\r\n        weatherPanel.selectedOptions.city = city;\r\n        weatherPanel.checkIfCanFetchWeatherData();\r\n    });\r\n    dayPanel.render();\r\n    citiesPanel.render();\r\n    citiesPanel.selectSelectCurrentCity();\r\n    dayPanel.selectToday();\r\n});"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJmcm9udGVuZFxcanNcXGNsYXNzZXNcXENvbXBvbmVudC5qcyIsImZyb250ZW5kXFxqc1xcY2xhc3Nlc1xcSHR0cFByb3ZpZGVyLmpzIiwiZnJvbnRlbmRcXGpzXFxjbGFzc2VzXFxTdWJqZWN0LmpzIiwiZnJvbnRlbmRcXGpzXFxjb21wb25lbnRzXFxjaXRpZXMtcGFuZWwuanMiLCJmcm9udGVuZFxcanNcXGNvbXBvbmVudHNcXGRheS1wYW5lbC5qcyIsImZyb250ZW5kXFxqc1xcY29tcG9uZW50c1xcd2VhdGhlci1wYW5lbC5qcyIsImZyb250ZW5kXFxqc1xcaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7O0FDRUE7Ozs7Ozs7Ozs7OztJQVlxQixZO0FBQ2pCLDBCQUFZLE9BQVosRUFBb0I7QUFBQTs7QUFDaEIsYUFBSyxNQUFMLEdBQWMsUUFBUSxNQUF0QjtBQUNBLGFBQUssU0FBTCxHQUFpQixPQUFPLFFBQVEsU0FBZixLQUE2QixRQUE3QixHQUF3QyxTQUFTLGFBQVQsQ0FBdUIsUUFBUSxTQUEvQixDQUF4QyxHQUFvRixRQUFRLFNBQTdHO0FBQ0EsYUFBSyxzQkFBTDtBQUNIOzs7O2lEQUN1QjtBQUNwQixpQkFBSSxJQUFJLEdBQVIsSUFBZSxLQUFLLE1BQXBCLEVBQTJCO0FBQ3ZCLG9CQUFHLEtBQUssTUFBTCxDQUFZLGNBQVosQ0FBMkIsR0FBM0IsQ0FBSCxFQUFtQztBQUMvQix5QkFBSyxLQUFLLE1BQUwsQ0FBWSxHQUFaLENBQUwsSUFBeUIsS0FBSyxLQUFLLE1BQUwsQ0FBWSxHQUFaLENBQUwsRUFBdUIsSUFBdkIsQ0FBNEIsSUFBNUIsQ0FBekI7QUFDSDtBQUNKO0FBQ0o7Ozt1Q0FDYTtBQUNWLGlCQUFJLElBQUksR0FBUixJQUFlLEtBQUssTUFBcEIsRUFBMkI7QUFDdkIsb0JBQUcsS0FB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OEIsS0FBMUIsQ0FBbkI7QUFHQSxhQUFTLGVBQVQsQ0FBeUIsU0FBekIsQ0FBbUMsVUFBQyxJQUFELEVBQVE7QUFDdkMscUJBQWEsZUFBYixDQUE2QixJQUE3QixHQUFvQyxJQUFJLElBQUosQ0FBUyxJQUFULENBQXBDO0FBQ0EscUJBQWEsd0JBQWI7QUFDSCxLQUhEO0FBSUEsZ0JBQVksZ0JBQVosQ0FBNkIsU0FBN0IsQ0FBdUMsVUFBQyxJQUFELEVBQVE7QUFDM0MscUJBQWEsZUFBYixDQUE2QixJQUE3QixHQUFvQyxJQUFwQztBQUNBLHFCQUFhLDBCQUFiO0FBQ0gsS0FIRDtBQUlBLGFBQVMsTUFBVDtBQUNBLGdCQUFZLE1BQVo7QUFDQSxnQkFBWSx1QkFBWjtBQUNBLGFBQVMsV0FBVDtBQUNILENBdkJEIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIlxyXG5cclxuLypcclxuKiBTRkxDb21wb25lbnRcclxuKlxyXG4qIENvbnN0cnVjdG9yIHRha2Ugb3B0aW9uc1xyXG4qIG9wdGlvbnMuZXZlbnRcclxuKiAgICAge1xyXG4qICAgICAgICdldmVudCBzZWxlY3Rvcic6ICdldmVudEhhbmRsZXInXHJcbiogICAgIH1cclxuKiBvcHRpb25zLmNvbnRhaW5lclxyXG4gICAgIERPTU5vZGUgb3Igc2VsZWN0b3JcclxuKlxyXG4qICovXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNGTENvbXBvbmVudHtcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpe1xyXG4gICAgICAgIHRoaXMuZXZlbnRzID0gb3B0aW9ucy5ldmVudHM7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSB0eXBlb2Ygb3B0aW9ucy5jb250YWluZXIgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvcHRpb25zLmNvbnRhaW5lcikgOiBvcHRpb25zLmNvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLnByZXBhcmVFdmVudHNMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuICAgIHByZXBhcmVFdmVudHNMaXN0ZW5lcnMoKXtcclxuICAgICAgICBmb3IobGV0IGtleSBpbiB0aGlzLmV2ZW50cyl7XHJcbiAgICAgICAgICAgIGlmKHRoaXMuZXZlbnRzLmhhc093blByb3BlcnR5KGtleSkpe1xyXG4gICAgICAgICAgICAgICAgdGhpc1t0aGlzLmV2ZW50c1trZXldXSA9IHRoaXNbdGhpcy5ldmVudHNba2V5XV0uYmluZCh0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGF0dGFjaEV2ZW50cygpe1xyXG4gICAgICAgIGZvcihsZXQga2V5IGluIHRoaXMuZXZlbnRzKXtcclxuICAgICAgICAgICAgaWYodGhpcy5ldmVudHMuaGFzT3duUHJvcGVydHkoa2V5KSl7XHJcbiAgICAgICAgICAgICAgICBsZXQga2V5UGFydHMgPSBrZXkuc3BsaXQoJyAnKVxyXG4gICAgICAgICAgICAgICAgbGV0IGV2ZW50ID0ga2V5UGFydHNbMF07XHJcbiAgICAgICAgICAgICAgICBsZXQgc2VsZWN0b3IgPSBrZXlQYXJ0cy5zbGljZSgxKS5qb2luKCcgJyk7XHJcbiAgICAgICAgICAgICAgICBsZXQgZWxlbWVudHMgPSB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcclxuICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCBlbGVtZW50cy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudHNbaV0uYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgdGhpc1t0aGlzLmV2ZW50c1trZXldXSk7ICAgIFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZGV0dGFjaEV2ZW50cygpe1xyXG4gICAgICAgIGZvcihsZXQga2V5IGluIHRoaXMuZXZlbnRzKXtcclxuICAgICAgICAgICAgaWYodGhpcy5ldmVudHMuaGFzT3duUHJvcGVydHkoa2V5KSl7XHJcbiAgICAgICAgICAgICAgICBsZXQga2V5UGFydHMgPSBrZXkuc3BsaXQoJyAnKTtcclxuICAgICAgICAgICAgICAgIGxldCBldmVudCA9IGtleVBhcnRzWzBdO1xyXG4gICAgICAgICAgICAgICAgbGV0IHNlbGVjdG9yID0ga2V5UGFydHMuc2xpY2UoMSkuam9pbignICcpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGVsZW1lbnRzID0gdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzW2ldLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIHRoaXNbdGhpcy5ldmVudHNba2V5XV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEh0dHBQcm92aWRlcntcclxuICAgIGRvR2V0KHBhdGgsIG9wdGlvbnMpe1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KT0+e1xyXG4gICAgICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAgICAgICAgIGxldCBxdWVyeSA9ICcnO1xyXG4gICAgICAgICAgICBmb3IodmFyIGkgaW4gb3B0aW9ucyl7XHJcbiAgICAgICAgICAgICAgICBxdWVyeSArPSBpICsgJz0nICsgb3B0aW9uc1tpXSArICcmJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB4aHIub3BlbignR0VUJywgcGF0aCArICc/JyArIHF1ZXJ5LCB0cnVlKTtcclxuXHJcbiAgICAgICAgICAgIHhoci5zZW5kKCk7XHJcblxyXG4gICAgICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoeGhyLnJlYWR5U3RhdGUgIT0gNCkgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgaWYgKHhoci5zdGF0dXMgPT09IDIwMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdCh4aHIucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3ViamVjdHtcclxuICAgIGNvbnN0cnVjdG9yKCl7XHJcbiAgICAgICAgdGhpcy5zdWJjcmliZXJzID0gW107XHJcbiAgICB9XHJcbiAgICBzdWJzY3JpYmUoZnVuYyl7XHJcbiAgICAgICAgdGhpcy5zdWJjcmliZXJzLnB1c2goZnVuYyk7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdW5zdWJzY3JpYmU6ICgpPT57XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN1YmNyaWJlcnMuc3BsaWNlKHRoaXMuc3ViY3JpYmVycy5pbmRleE9mKGZ1bmMpLCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG5leHQoZGF0YSl7XHJcbiAgICAgICAgdGhpcy5zdWJjcmliZXJzLmZvckVhY2goKHN1YnNjcmliZXIpPT57XHJcbiAgICAgICAgICAgIHN1YnNjcmliZXIoZGF0YSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsImltcG9ydCBTRkxDb21wb25lbnQgZnJvbSAnLi4vY2xhc3Nlcy9Db21wb25lbnQnO1xyXG5pbXBvcnQgU3ViamVjdCBmcm9tICcuLi9jbGFzc2VzL1N1YmplY3QnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2l0aWVzUGFuZWxDb21wb25lbnQgZXh0ZW5kcyBTRkxDb21wb25lbnR7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKXtcclxuICAgICAgICBsZXQgZXZlbnRzID0ge1xyXG4gICAgICAgICAgICAnY2hhbmdlIC5jaXRpZXMnOiAnc2VsZWN0Q2l0eSdcclxuICAgICAgICB9O1xyXG4gICAgICAgIHN1cGVyKE9iamVjdC5hc3NpZ24ob3B0aW9ucywge1xyXG4gICAgICAgICAgICBldmVudHM6IGV2ZW50c1xyXG4gICAgICAgIH0pKTtcclxuICAgICAgICB0aGlzLmNpdHlDaGFuZ2VTdHJlYW0gPSBuZXcgU3ViamVjdCgpO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWRDaXR5ID0gbnVsbDtcclxuICAgICAgICB0aGlzLmNpdGllc0RhdGEgPSBbJ01vc2NvdycsICdZZXJldmFuJywgJ0xvbmRvbicsICdLaWV2JywgJ0Ftc3RlcmRhbSddO1xyXG5cclxuICAgIH1cclxuICAgIHNlbGVjdFNlbGVjdEN1cnJlbnRDaXR5KCl7XHJcbiAgICAgICAgaWYgKG5hdmlnYXRvci5nZW9sb2NhdGlvbikge1xyXG4gICAgICAgICAgICBuYXZpZ2F0b3IuZ2VvbG9jYXRpb24uZ2V0Q3VycmVudFBvc2l0aW9uKChwb3NpdGlvbik9PntcclxuICAgICAgICAgICAgICAgIGxldCBnZW9jb2RlciA9IG5ldyBnb29nbGUubWFwcy5HZW9jb2RlcigpO1xyXG4gICAgICAgICAgICAgICAgbGV0IGxhdCA9IHBvc2l0aW9uLmNvb3Jkcy5sYXRpdHVkZTtcclxuICAgICAgICAgICAgICAgIGxldCBsbmcgPSBwb3NpdGlvbi5jb29yZHMubG9uZ2l0dWRlO1xyXG4gICAgICAgICAgICAgICAgbGV0IGxhdGxuZyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcobGF0LCBsbmcpO1xyXG4gICAgICAgICAgICAgICAgZ2VvY29kZXIuZ2VvY29kZSh7J2xhdExuZyc6IGxhdGxuZ30sIChyZXN1bHRzLCBzdGF0dXMpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMgPT0gZ29vZ2xlLm1hcHMuR2VvY29kZXJTdGF0dXMuT0spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNpdHk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRzWzFdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2Zvcm1hdHRlZCBhZGRyZXNzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2ZpbmQgY291bnRyeSBuYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8cmVzdWx0c1swXS5hZGRyZXNzX2NvbXBvbmVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBiPTA7YjxyZXN1bHRzWzBdLmFkZHJlc3NfY29tcG9uZW50c1tpXS50eXBlcy5sZW5ndGg7YisrKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3RoZXJlIGFyZSBkaWZmZXJlbnQgdHlwZXMgdGhhdCBtaWdodCBob2xkIGEgY2l0eSBhZG1pbl9hcmVhX2x2bF8xIHVzdWFsbHkgZG9lcyBpbiBjb21lIGNhc2VzIGxvb2tpbmcgZm9yIHN1YmxvY2FsaXR5IHR5cGUgd2lsbCBiZSBtb3JlIGFwcHJvcHJpYXRlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRzWzBdLmFkZHJlc3NfY29tcG9uZW50c1tpXS50eXBlc1tiXSA9PSBcImFkbWluaXN0cmF0aXZlX2FyZWFfbGV2ZWxfMVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3RoaXMgaXMgdGhlIG9iamVjdCB5b3UgYXJlIGxvb2tpbmcgZm9yXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaXR5PSByZXN1bHRzWzBdLmFkZHJlc3NfY29tcG9uZW50c1tpXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZENpdHkgPSBjaXR5LnNob3J0X25hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNpdHlDaGFuZ2VTdHJlYW0ubmV4dCh0aGlzLnNlbGVjdGVkQ2l0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdzZWxlY3QnKS52YWx1ZSA9IHRoaXMuc2VsZWN0ZWRDaXR5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJObyByZXN1bHRzIGZvdW5kXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25zb2xlLmxvZyhcIkdlb2NvZGVyIGZhaWxlZCBkdWUgdG86IFwiICsgc3RhdHVzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSwgKGVycik9PntcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2VsZWN0Q2l0eShldmVudCl7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZENpdHkgPSBldmVudC50YXJnZXQudmFsdWU7XHJcbiAgICAgICAgdGhpcy5jaXR5Q2hhbmdlU3RyZWFtLm5leHQodGhpcy5zZWxlY3RlZENpdHkpO1xyXG4gICAgfVxyXG4gICAgcmVuZGVyKCl7XHJcbiAgICAgICAgdGhpcy5kZXR0YWNoRXZlbnRzKCk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgbGV0IHNlbGVjdEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2VsZWN0Jyk7XHJcbiAgICAgICAgc2VsZWN0RWwuY2xhc3NMaXN0LmFkZCgnY2l0aWVzJyk7XHJcbiAgICAgICAgdGhpcy5jaXRpZXNEYXRhLmZvckVhY2goKGNpdHkpPT57XHJcbiAgICAgICAgICAgIGxldCBvcHRpb25FbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xyXG4gICAgICAgICAgICBvcHRpb25FbC5zZXRBdHRyaWJ1dGUoJ3ZhbHVlJywgY2l0eSk7XHJcbiAgICAgICAgICAgIG9wdGlvbkVsLmlubmVyVGV4dCA9IGNpdHk7XHJcbiAgICAgICAgICAgIHNlbGVjdEVsLmFwcGVuZENoaWxkKG9wdGlvbkVsKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWxlY3RFbCk7XHJcbiAgICAgICAgdGhpcy5hdHRhY2hFdmVudHMoKTtcclxuICAgIH1cclxufSIsImltcG9ydCBTRkxDb21wb25lbnQgZnJvbSAnLi4vY2xhc3Nlcy9Db21wb25lbnQnO1xyXG5pbXBvcnQgU3ViamVjdCBmcm9tICcuLi9jbGFzc2VzL1N1YmplY3QnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGF5UGFuZWxDb21wb25lbnQgZXh0ZW5kcyBTRkxDb21wb25lbnR7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKXtcclxuICAgICAgICBsZXQgZXZlbnRzID0ge1xyXG4gICAgICAgICAgICAnY2xpY2sgLmRhdGUnOiAnc2VsZWN0RGF0ZSdcclxuICAgICAgICB9O1xyXG4gICAgICAgIHN1cGVyKE9iamVjdC5hc3NpZ24ob3B0aW9ucywge1xyXG4gICAgICAgICAgICBldmVudHM6IGV2ZW50c1xyXG4gICAgICAgIH0pKTtcclxuICAgICAgICB0aGlzLmRheUNoYW5nZVN0cmVhbSA9IG5ldyBTdWJqZWN0KCk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZERheSA9IG51bGw7XHJcblxyXG4gICAgfVxyXG4gICAgZ2V0VG9kYXkoKXtcclxuICAgICAgICBsZXQgdG9kYXkgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIHRvZGF5LnNldEhvdXJzKDApO1xyXG4gICAgICAgIHRvZGF5LnNldE1pbnV0ZXMoMCk7XHJcbiAgICAgICAgdG9kYXkuc2V0TWludXRlcygwKTtcclxuICAgICAgICB0b2RheS5zZXRNaWxsaXNlY29uZHMoMCk7XHJcbiAgICAgICAgcmV0dXJuIHRvZGF5O1xyXG4gICAgfVxyXG4gICAgc2VsZWN0VG9kYXkoKXtcclxuICAgICAgICBsZXQgdG9kYXkgPSB0aGlzLmdldFRvZGF5KCk7XHJcbiAgICAgICAgdGhpcy51bnNlbGVjdEFsbCgpO1xyXG4gICAgICAgIHRoaXMuc2VsZWN0ZWREYXkgPSB0b2RheS5nZXRUaW1lKCk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIucXVlcnlTZWxlY3RvcignLmRhdGVbZGF0ZT1cIicgKyB0b2RheS5nZXRUaW1lKCkgKyAnXCJdJykuY2xhc3NMaXN0LmFkZCgnZGF0ZV9zZWxlY3RlZCcpO1xyXG4gICAgICAgIHRoaXMuZGF5Q2hhbmdlU3RyZWFtLm5leHQodGhpcy5zZWxlY3RlZERheSk7XHJcbiAgICB9XHJcbiAgICB1bnNlbGVjdEFsbCgpe1xyXG4gICAgICAgIGxldCBkYXlFbGVtZW50cyA9IHRoaXMuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYXRlJyk7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGRheUVsZW1lbnRzLmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgZGF5RWxlbWVudHNbaV0uY2xhc3NMaXN0LnJlbW92ZSgnZGF0ZV9zZWxlY3RlZCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNlbGVjdERhdGUoZXZlbnQpe1xyXG4gICAgICAgIHRoaXMudW5zZWxlY3RBbGwoKTtcclxuICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2RhdGVfc2VsZWN0ZWQnKTtcclxuICAgICAgICB0aGlzLnNlbGVjdGVkRGF5ID0gcGFyc2VJbnQoZXZlbnQuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGUnKSk7XHJcbiAgICAgICAgdGhpcy5kYXlDaGFuZ2VTdHJlYW0ubmV4dCh0aGlzLnNlbGVjdGVkRGF5KTtcclxuICAgIH1cclxuICAgIGdldFVwY29taW5nRGF0ZXMoKXtcclxuICAgICAgICBsZXQgdG9kYXkgPSB0aGlzLmdldFRvZGF5KCk7XHJcbiAgICAgICAgbGV0IHVwY29taW5nRGF0ZXMgPSBbXTtcclxuICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgNzsgaSsrKXtcclxuICAgICAgICAgICAgbGV0IGRhdGUgPSBuZXcgRGF0ZSh0b2RheS5nZXRUaW1lKCkgKyBpKjI0KjYwKjYwKjEwMDApO1xyXG4gICAgICAgICAgICB1cGNvbWluZ0RhdGVzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgZGF5OiBkYXRlLmdldERhdGUoKSxcclxuICAgICAgICAgICAgICAgIHdlZWtEYXk6IFtcclxuICAgICAgICAgICAgICAgICAgICAnU3VuZGF5JyxcclxuICAgICAgICAgICAgICAgICAgICAnTW9uZGF5JyxcclxuICAgICAgICAgICAgICAgICAgICAnVHVlc2RheScsXHJcbiAgICAgICAgICAgICAgICAgICAgJ1dlZG5lc2RheScsXHJcbiAgICAgICAgICAgICAgICAgICAgJ1RodXJzZGF5JyxcclxuICAgICAgICAgICAgICAgICAgICAnRnJpZGF5JyxcclxuICAgICAgICAgICAgICAgICAgICAnU2F0dXJkYXknXHJcbiAgICAgICAgICAgICAgICBdW2RhdGUuZ2V0RGF5KCldLFxyXG4gICAgICAgICAgICAgICAgdGltZTogZGF0ZS5nZXRUaW1lKCksXHJcbiAgICAgICAgICAgICAgICBtb250aDogW1xyXG4gICAgICAgICAgICAgICAgICAgIFwiSmFudWFyeVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiRmVicnVhcnlcIixcclxuICAgICAgICAgICAgICAgICAgICBcIk1hcmNoXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJBcHJpbFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiTWF5XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJKdW5lXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJKdWx5XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJBdWd1c3RcIixcclxuICAgICAgICAgICAgICAgICAgICBcIlNlcHRlbWJlclwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiT2N0b2JlclwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiTm92ZW1iZXJcIixcclxuICAgICAgICAgICAgICAgICAgICBcIkRlY2VtYmVyXCJcclxuICAgICAgICAgICAgICAgIF1bZGF0ZS5nZXRNb250aCgpXVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdXBjb21pbmdEYXRlcztcclxuICAgIH1cclxuICAgIHJlbmRlcigpe1xyXG4gICAgICAgIHRoaXMuZGV0dGFjaEV2ZW50cygpO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIGxldCBkYXRlcyA9IHRoaXMuZ2V0VXBjb21pbmdEYXRlcygpO1xyXG4gICAgICAgIGRhdGVzLmZvckVhY2goKGRhdGUpPT57XHJcbiAgICAgICAgICAgIGxldCBkYXRlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSxcclxuICAgICAgICAgICAgICAgIGRheUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKSxcclxuICAgICAgICAgICAgICAgIG1vbnRoTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpLFxyXG4gICAgICAgICAgICAgICAgd2Vla0RheUxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGFiZWwnKTtcclxuICAgICAgICAgICAgZGF0ZUVsLmNsYXNzTGlzdC5hZGQoJ2RhdGUnKTtcclxuICAgICAgICAgICAgZGF5TGFiZWwuY2xhc3NMaXN0LmFkZCgnZGF0ZV9kYXknKTtcclxuICAgICAgICAgICAgbW9udGhMYWJlbC5jbGFzc0xpc3QuYWRkKCdkYXRlX21vbnRoJyk7XHJcbiAgICAgICAgICAgIHdlZWtEYXlMYWJlbC5jbGFzc0xpc3QuYWRkKCdkYXRlX3dlZWsnKTtcclxuICAgICAgICAgICAgZGF5TGFiZWwuaW5uZXJUZXh0ID0gZGF0ZS5kYXk7XHJcbiAgICAgICAgICAgIG1vbnRoTGFiZWwuaW5uZXJUZXh0ID0gZGF0ZS5tb250aDtcclxuICAgICAgICAgICAgd2Vla0RheUxhYmVsLmlubmVyVGV4dCA9IGRhdGUud2Vla0RheTtcclxuICAgICAgICAgICAgZGF0ZUVsLnNldEF0dHJpYnV0ZSgnZGF0ZScsIGRhdGUudGltZSk7XHJcbiAgICAgICAgICAgIGRhdGVFbC5hcHBlbmRDaGlsZChkYXlMYWJlbCk7XHJcbiAgICAgICAgICAgIGRhdGVFbC5hcHBlbmRDaGlsZChtb250aExhYmVsKTtcclxuICAgICAgICAgICAgZGF0ZUVsLmFwcGVuZENoaWxkKHdlZWtEYXlMYWJlbCk7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKGRhdGVFbCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5hdHRhY2hFdmVudHMoKTtcclxuICAgIH1cclxufSIsImltcG9ydCBTRkxDb21wb25lbnQgZnJvbSAnLi4vY2xhc3Nlcy9Db21wb25lbnQnO1xyXG5pbXBvcnQgU3ViamVjdCBmcm9tICcuLi9jbGFzc2VzL1N1YmplY3QnO1xyXG5pbXBvcnQgSHR0cFByb3ZpZGVyIGZyb20gJy4uL2NsYXNzZXMvSHR0cFByb3ZpZGVyJztcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgV2VhdGhlclBhbmVsQ29tcG9uZW50IGV4dGVuZHMgU0ZMQ29tcG9uZW50e1xyXG4gICAgY29uc3RydWN0b3Iob3B0aW9ucyl7XHJcbiAgICAgICAgc3VwZXIoT2JqZWN0LmFzc2lnbihvcHRpb25zLCB7fSkpO1xyXG4gICAgICAgIHRoaXMuaHR0cCA9IG5ldyBIdHRwUHJvdmlkZXIoKTtcclxuICAgICAgICB0aGlzLmRheUNoYW5nZVN0cmVhbSA9IG5ldyBTdWJqZWN0KCk7XHJcbiAgICAgICAgdGhpcy5zZWxlY3RlZE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGNpdHk6IG51bGwsXHJcbiAgICAgICAgICAgIGRhdGU6IG51bGxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZmV0Y2hlZERhdGEgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY2hlY2tJZkNhbkZldGNoV2VhdGhlckRhdGEgPSB0aGlzLmNoZWNrSWZDYW5GZXRjaFdlYXRoZXJEYXRhLmJpbmQodGhpcyk7XHJcbiAgICB9XHJcbiAgICBjaGVja0lmTmVlZFVwZGF0ZURpc3BsYXkoKXtcclxuICAgICAgICBpZih0aGlzLnNlbGVjdGVkT3B0aW9ucy5kYXRlKXtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjaGVja0lmQ2FuRmV0Y2hXZWF0aGVyRGF0YSgpe1xyXG4gICAgICAgIGlmKHRoaXMuc2VsZWN0ZWRPcHRpb25zLmNpdHkpe1xyXG4gICAgICAgICAgICB0aGlzLmZldGNoV2VhdGhlckRhdGEoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmZXRjaFdlYXRoZXJEYXRhKCl7XHJcbiAgICAgICAgdGhpcy5odHRwLmRvR2V0KCdodHRwczovL2NvcnMtYW55d2hlcmUuaGVyb2t1YXBwLmNvbS9odHRwOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS9mb3JlY2FzdCcsIHtcclxuICAgICAgICAgICAgYXBwaWQ6ICdhOWJjZjRmNDg5OWFhYWI2YjcxOTRlM2Y2NzRmMTYyYicsXHJcbiAgICAgICAgICAgIHE6IHRoaXMuc2VsZWN0ZWRPcHRpb25zLmNpdHksXHJcbiAgICAgICAgICAgIHVuaXRzOiAnbWV0cmljJ1xyXG4gICAgICAgIH0pLnRoZW4oKGRhdGEpPT57XHJcbiAgICAgICAgICAgIHRoaXMuZmV0Y2hlZERhdGEgPSBkYXRhO1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrSWZOZWVkVXBkYXRlRGlzcGxheSgpO1xyXG4gICAgICAgIH0sIChlcnIpPT57XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICB9KVxyXG4gICAgfVxyXG4gICAgcmVuZGVyKCl7XHJcbiAgICAgICAgdGhpcy5kZXR0YWNoRXZlbnRzKCk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgbGV0IGRpc3BsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMScpO1xyXG4gICAgICAgIGlmKHRoaXMuZmV0Y2hlZERhdGEgJiYgdGhpcy5zZWxlY3RlZE9wdGlvbnMuZGF0ZSl7XHJcbiAgICAgICAgICAgIC8vZmluZCB3ZWF0aGVyIGRhdGEgZm9yIHNlbGVjdGVkIGRhdGVcclxuICAgICAgICAgICAgbGV0IGRhdGEgPSB0aGlzLmZldGNoZWREYXRhLmxpc3QuZmlsdGVyKChkYXRhKT0+e1xyXG4gICAgICAgICAgICAgICAgbGV0IHRpbWUgPSB0aGlzLnNlbGVjdGVkT3B0aW9ucy5kYXRlLmdldFRpbWUoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmR0KjEwMDAgPiB0aW1lICYmIHRpbWUgPCBkYXRhLmR0KjEwMDAgKyAyMy45KjYwKjYwKjEwMDA7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBsZXQgc3VtID0gMDtcclxuXHJcbiAgICAgICAgICAgIGRhdGEuZm9yRWFjaCgoc2luZ2xlRGF0YSk9PntcclxuICAgICAgICAgICAgICAgIHN1bSs9c2luZ2xlRGF0YS5tYWluLnRlbXA7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZihkYXRhLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheS5pbm5lclRleHQgPSAoc3VtL2RhdGEubGVuZ3RoKS50b0ZpeGVkKDEpICsgJ0MnO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZGlzcGxheS5pbm5lclRleHQgPSAnVW5rbm93bic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFwcGVuZENoaWxkKGRpc3BsYXkpO1xyXG4gICAgICAgIHRoaXMuYXR0YWNoRXZlbnRzKCk7XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgRGF5UGFuZWxDb21wb25lbnQgZnJvbSAnLi9jb21wb25lbnRzL2RheS1wYW5lbCc7XHJcbmltcG9ydCBDaXRpZXNQYW5lbENvbXBvbmVudCBmcm9tICcuL2NvbXBvbmVudHMvY2l0aWVzLXBhbmVsJztcclxuaW1wb3J0IFdlYXRoZXJQYW5lbENvbXBvbmVudCBmcm9tICcuL2NvbXBvbmVudHMvd2VhdGhlci1wYW5lbCc7XHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgKCk9PntcclxuICAgIGNvbnNvbGUubG9nKCdvaycpO1xyXG4gICAgbGV0IGRheVBhbmVsID0gbmV3IERheVBhbmVsQ29tcG9uZW50KHtcclxuICAgICAgICBjb250YWluZXI6ICcuZGF0ZXMtcGFuZWwnXHJcbiAgICB9KTtcclxuICAgIGxldCBjaXRpZXNQYW5lbCA9IG5ldyBDaXRpZXNQYW5lbENvbXBvbmVudCh7XHJcbiAgICAgICAgY29udGFpbmVyOiAnLmNpdGllcy1wYW5lbCdcclxuICAgIH0pO1xyXG4gICAgbGV0IHdlYXRoZXJQYW5lbCA9IG5ldyBXZWF0aGVyUGFuZWxDb21wb25lbnQoe1xyXG4gICAgICAgIGNvbnRhaW5lcjogJy53ZWF0aGVyLXBhbmVsJ1xyXG4gICAgfSk7XHJcbiAgICBkYXlQYW5lbC5kYXlDaGFuZ2VTdHJlYW0uc3Vic2NyaWJlKCh0aW1lKT0+e1xyXG4gICAgICAgIHdlYXRoZXJQYW5lbC5zZWxlY3RlZE9wdGlvbnMuZGF0ZSA9IG5ldyBEYXRlKHRpbWUpO1xyXG4gICAgICAgIHdlYXRoZXJQYW5lbC5jaGVja0lmTmVlZFVwZGF0ZURpc3BsYXkoKTtcclxuICAgIH0pO1xyXG4gICAgY2l0aWVzUGFuZWwuY2l0eUNoYW5nZVN0cmVhbS5zdWJzY3JpYmUoKGNpdHkpPT57XHJcbiAgICAgICAgd2VhdGhlclBhbmVsLnNlbGVjdGVkT3B0aW9ucy5jaXR5ID0gY2l0eTtcclxuICAgICAgICB3ZWF0aGVyUGFuZWwuY2hlY2tJZkNhbkZldGNoV2VhdGhlckRhdGEoKTtcclxuICAgIH0pO1xyXG4gICAgZGF5UGFuZWwucmVuZGVyKCk7XHJcbiAgICBjaXRpZXNQYW5lbC5yZW5kZXIoKTtcclxuICAgIGNpdGllc1BhbmVsLnNlbGVjdFNlbGVjdEN1cnJlbnRDaXR5KCk7XHJcbiAgICBkYXlQYW5lbC5zZWxlY3RUb2RheSgpO1xyXG59KTsiXX0="}